DATA SEGMENT
A EQU 0640H 
B EQU 0642H
CONTROL EQU 0646H
MODE_CONTROL_WORD EQU 090H
DATA ENDS

STACK SEGMENT 
STACK ENDS

CODE SEGMENT
ASSUME CS:CODE,SS:STACK
START:
MOV AL,MODE_CONTROL_WORD 
MOV DX,CONTROL 
OUT DX,AL      

AA1:
MOV DX,A
IN AL,DX 

AND AL,0003H

CMP AL,0000H
JE AllTurnOff

CMP AL,0001H
JE LightLow4

CMP AL,0002H
JE LightHigh4

CMP AL,0003H
JE AllTurnOn

AllTurnOff:
MOV AL,0000H
JMP OUT

LightLow4:
MOV AL,000FH
JMP OUT
  
LightHigh4:
MOV AL,00F0H
JMP OUT  
  
AllTurnOn:
MOV AL,00FFH
JMP OUT 
  
OUT:  
CALL DELAY             
MOV DX,B
OUT DX,AL

JMP AA1      

DELAY:
PUSH CX
MOV CX,00F0H
AA2:
LOOP AA2
POP CX
RET
